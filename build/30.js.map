{"version":3,"sources":["../../src/pages/document/document.module.ts","../../src/pages/document/document.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DocumentPage } from './document';\n\n@NgModule({\n  declarations: [\n    DocumentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DocumentPage),\n  ],\n})\nexport class DocumentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/document/document.module.ts","import { Component } from '@angular/core';\nimport {AlertController, IonicPage, ModalController, NavController, NavParams} from 'ionic-angular';\nimport {FileManagerProvider} from \"../../providers/file-manager/file-manager\";\nimport {File} from \"../../providers/file-manager/file.modal\";\nimport {HomePage} from \"../home/home\";\nimport {AuthManagerProvider} from \"../../providers/auth-manager/auth-manager\";\n\n/**\n * Generated class for the DocumentPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-document',\n  templateUrl: 'document.html',\n})\nexport class DocumentPage {\n\n  private document:File;\n\n  get isDir() {\n    if(this.document == null) return false;\n    return this.document.isDirectory;\n  }\n  constructor(public navCtrl: NavController, public navParams: NavParams, private fileManager:FileManagerProvider, private authProvider:AuthManagerProvider, private modalCtrl:ModalController, private alertCtrl: AlertController) {\n\n\n\n    if(navParams.get(\"data\") == null && this.fileManager.cached == null) {\n      this.navCtrl.setRoot(HomePage);\n      return;\n    }\n    if(navParams.get(\"data\") == null) {\n      this.firstLayerCall();\n      return;\n    }\n    this.document = navParams.get(\"data\");\n    this.otherLayerCall();\n  }\n\n  openHomePage() {\n    this.navCtrl.setRoot(HomePage);\n  }\n\n  /**\n   * Initial view which shows the folders\n   */\n  private firstLayerCall() {\n\n    this.document = this.fileManager.cached;\n\n  }\n  private otherLayerCall() {\n\n  }\n  uploadFile() {\n    this.modalCtrl.create('FileUploadPage').present();\n  }\n\n  get canUpload() {\n    return this.authProvider.isMedical\n  }\n\n  /**\n   * Refreshes UI and the documents appearing\n   * @param refresher\n   */\n  doRefresh(refresher) {\n    const me = this;\n    this.fileManager.updateFile(() => {\n      me.firstLayerCall();\n      refresher.complete();\n\n    })\n  }\n\n  /**\n   * Prompts the user to confirm to download the document from the server\n   */\n  private download() {\n\n      let alert = this.alertCtrl.create();\n      alert.setTitle(\"Download best채tigen\");\n      alert.setMessage(\"Diese Aktion verwendet einen Teil des Verschl체sselungsschl체ssels, um die sichere Datei herunterzuladen.<br/>Wollen Sie fortfahren?\");\n      alert.addButton('Abbrechen');\n      alert.addButton({\n          text: 'Best채tigen',\n          handler: data => {\n              this.fileManager.downloadFile(this.document);\n          }\n      });\n      alert.present();\n\n  }\n\n  /**\n   * Opens a preview page of the document\n   * @param item\n   */\n  itemTapped(item: File) {\n\n    console.log(\"File:\" , item)\n    // TODO Add links to the item here?\n\n    if (item.isDirectory == false) {\n      if (item.type.includes(\"image\")) {\n        item.links = [];\n        item.links.push(this.fileManager.generatePreviewLink(this.authProvider.key, item.parent.name, item.name, \"image\"));\n        console.log(\"Added image previews:\", item)\n      } else if (item.type.includes(\"pdf\")) {\n        item.links = [];\n        for (let c = 0; c < item.siteCount; c++) {\n          let link = this.fileManager.generatePreviewLink(this.authProvider.key, item.parent.name, item.name, \"preview\", c);\n          item.links.push(link)\n\n        }\n        console.log(\"Added PDF previews:\", item)\n      }\n    }\n\n    this.navCtrl.push(DocumentPage, {data: item})\n  }\n\nionViewDidLoad() {\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/document/document.ts"],"sourceRoot":""}
{"version":3,"sources":["../../src/pages/info-list/info-list.module.ts","../../src/pages/info-list/info-list.ts","../../src/providers/info/info.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { InfoListPage } from './info-list';\n\n@NgModule({\n  declarations: [\n    InfoListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(InfoListPage),\n  ],\n})\nexport class InfoListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/info-list/info-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport {InfoProvider} from \"../../providers/info/info\";\nimport {DrupalPost} from \"../../providers/info/models/drupal-post.model\";\nimport {HomePage} from \"../home/home\";\n\n/**\n * Generated class for the InfoListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-info-list',\n  templateUrl: 'info-list.html',\n  providers: [InfoProvider]\n})\nexport class InfoListPage {\n\n  loaded = false;\n  public posts: DrupalPost[];\n  constructor(private drupal: InfoProvider, private nav: NavController) {\n    const me = this;\n    this.drupal.getPosts((posts) => {\n      this.posts  = posts;\n      me.loaded = true;\n    })\n  }\n\n  openHomePage() {\n    this.nav.setRoot(HomePage);\n  }\n\n  /**\n   * Opens a new page/view with the full information of the item specified\n   * @param item\n   */\n  public itemTapped(item) {\n    this.nav.push('InfoItemPage', {\n      item: item\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad InfoListPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/info-list/info-list.ts","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport {DrupalPost} from \"./models/drupal-post.model\";\nimport {AuthManagerProvider} from \"../auth-manager/auth-manager\";\nimport {LinkManagerProvider} from \"../link-manager/link-manager\";\n\n/*\n  Generated class for the InfoProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class InfoProvider {\n\n  private articles: DrupalPost[];\n  constructor(public http: Http, private authProvider:AuthManagerProvider, private linkManager: LinkManagerProvider) {}\n\n  public getPostIds(callback) {\n    let url = \"\";\n    if (!this.authProvider.isLoggedIn)\n      url = this.linkManager.getInfoIdsList(\"114\");\n    else {\n      if (this.authProvider.clinicName == \"\")\n        url = this.linkManager.getInfoIdsList(\"111\");\n      else\n        url = this.linkManager.getInfoIdsList(this.authProvider.clinicName);\n    }\n    this.http.get(url).map(res => res.json()).subscribe(response => {\n\n      if(response[\"0\"] != undefined)\n        callback(\"/\" + response[\"0\"].pages.join('+'), response[\"0\"].pages);\n      else\n        callback(\"/\", []);\n    });\n\n  }\n\n  public getPosts(callback) {\n    const me = this;\n    this.getPostIds((ids, idsArr) => {\n      me.http.get(this.linkManager.getInfos(ids)).map(res => res.json()).subscribe(response => {\n\n        const reSorted = [];\n\n        for (let i = 0; i < idsArr.length; i++) {\n          const current = idsArr[i];\n\n          if (response != undefined)\n            for (let x = 0; x < response.length; x++) {\n              if (response[x].nid[0].value == current) {\n                reSorted.push(response[x]);\n                break;\n              }\n            }\n        }\n        me.articles = reSorted.map((item: any) => me.createArticle(item));\n        callback(me.articles);\n      });\n    });\n  }\n\n\n  private parseImgSrc(item): string {\n\n    if (item.field_image.length) {\n      return item.field_image[0].url;\n    } else {\n      return \"\";\n    }\n    //const match = tag.match(/<img.+src=(?:\"|')(.+?)(?:\"|')(?:.+?)>/);\n    //return match[1];\n  }\n\n  private createArticle(item): DrupalPost {\n\n    return {\n      id: item.nid[0].value,\n      title: item.title[0].value,\n      brief: item.body[0].summary,\n      image: this.parseImgSrc(item),\n//image: ,\n      content: item.body[0].value,\n      tags: item.tags\n    };\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/info/info.ts"],"sourceRoot":""}